<% flash.each do |key, value| %>
    <div class="alert alert-warning <%= key %>">
      <%= value %>
    </div>
<% end %>

<div class="section_orders_index">
  <div class="row no-gutters row_orders_index justify-content-center">
    <div class="col-10">
      <div class="orders_index_header text-center pb-4">
        <h1>RESCUER購買清單</h1>
      </div>
      <table class='table table-hover table-lg'>
        <thead class="bg-dark text-light p-2">
          <tr class="text-nowrap text-center">
            <th>訂單編號</th>
            <th>商店名稱</th>
            <th>日期</th>
            <th>備註</th>
            <th>付款狀態</th>
            <th>詳細</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody class="bg-light">
          <% @rescuer_orders.each do |order|%>
          <tr class="text-center">
            <td><%= order.friendly_id.upcase%></td>
            <td><%= User.find(order.giver_id).name %></td>
            <td><%= I18n.l(order.created_at, formats: :default) %></td>
            <td><%= order.note%></td>
            <td><%= order.aasm.human_state%></td>
            <td><%= link_to "詳細內容", order_path(order), class:'btn btn-success btn-sm' %></td>
            <td><%= link_to "付款", payment_order_path(order), class: 'btn btn-danger btn-sm' if order.may_pay? %>
            </td>
            <td><%= link_to "取消", order_path(order), method: 'delete', class: 'btn btn-secondary btn-sm', data: {confirm: '確定要取消訂單嗎？'} if order.may_pay?%></td>
          </tr>
          <%end%>
        </tbody>
      </table>
    </div>
  </div>
</div>
<%= render 'shared/frontend/footer' %>
